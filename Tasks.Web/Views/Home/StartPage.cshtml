@model IEnumerable<Tasks.BLL.DTO.TaskDTO>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    var taskStatus = string.Empty;

}

<div>
    <h1 style="text-align:center">Задачи</h1>
    <table class="myTable">
        <tr>
            <td style="text-align:left">
                <p class="inline"> <a asp-action="CreateTask" asp-controller="Task"><img src="images/addBtn.png" width="30"></a></p>
                <p class="inline" onclick="getSelectedRow()"><img src="images/watchBtn.png" width="30"></p>
            </td style="text-align:left">
            <td>
                <form asp-action="StartPage" asp-controller="Home" asp-anti-forgery="true">
                    <div style="text-align: right">
                        <label for="">Выберите нужный статус:</label>
                        <select id="StatusId" name="StatusId">
                            <option value=""></option>
                            <option value="1">Создана</option>
                            <option value="2">В работе</option>
                            <option value="3">Завершена</option>
                        </select>
                        <input type="submit" value="Применить фильтр" formmethod="post" />
                    </div>
                </form>
            </td>
        </tr>
    </table>

    <table id="mytable" class="table">
        <thead>
            <tr>
                <th>Задача</th>
                <th>Описание</th>
                <th>Статус</th>
                <th>Действие</th>
            </tr>
        </thead>
        <tbody>
        @{
            foreach (var item in Model.Reverse())
            {
                <tr onclick="highlight(this);">
                    <td style="text-align:left">@Html.DisplayFor(modelItem => item.Name)</td>
                        <td style="text-align:left"> @Html.DisplayFor(modelItem => item.Description) </td>
                    <td class="centre">
                        @{
                            if (item.StatusId == 1)
                                taskStatus = "Создана";
                            if (item.StatusId == 2)
                                taskStatus = "В работе";
                            if (item.StatusId == 3)
                                taskStatus = "Завершена";
                         }
                         @Html.DisplayFor(modelItem => taskStatus)
                    </td>
                    <td style="text-align:center">
                        <p class="inline"> <a asp-action="UpdateTask" asp-controller="Task" asp-route-id="@item.Id"><img src="images/editBtn.png" width="30"></a></p>
                        <p class="inline"> <a asp-action="DeleteTask" asp-controller="Task" asp-route-id="@item.Id"><img src="images/deletBtn.png" width="30"></a></p>
                    </td>
                </tr>
            }
        }
        </tbody>
    </table>
</div>